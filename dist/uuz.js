!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).uuz={})}(this,(function(e){"use strict";const t=e=>"function"==typeof e,n=e=>({type:"text",props:{children:[],content:e}});let o,r=new WeakMap;function l(e,t={}){const n=function(...t){return o=n,e(...t)};return t.lazy||n(),n.options=t,n}function s(e,t){let n=r.get(e);n||r.set(e,n=new Map);let l=n.get(t);l||n.set(t,l=new Set),l.has(o)||l.add(o)}function c(e,t){const n=r.get(e);if(!n)return;const o=new Set;n.get(t).forEach(e=>o.add(e)),o.forEach(e=>function(e){console.log(e.options,"ops"),void 0!==e.options.scheduler?e.options.scheduler(e):e()}(e))}function i(e,t,n){l((function(){e.active||(e.$data=e.setup(),e.active=!0);let o=e.render();u(o,t,n||t.firstChild)}))}const u=(e,n,o)=>{let r=o&&o.vnode;o?t(e.type)?p(e,null,n,o):r&&r.type===e.type?f(o,e,r):console.log("不值得比较了"):d(e,n,o)},p=(e,t,n,o)=>{t||d(e,n,o)},f=(e,t,n)=>{"text"===n.type?v(e,t,n):h(e,t,n),e.vnode=t,t.props.children.forEach((t,n)=>{u(t,e,e.childNodes[n])});let o=e.childNodes,r=o.length-1,l=t.props.children.length-1;if(r>l)for(let t=r;t>l;t--)g(e,o[t])},d=(e,n,o)=>t(e.type)?a(e,n,o):y(e,n,o),a=(e,n,o)=>{let r=e;for(;t(r.type);)r=r.type(e.props||{});return d(r,n,o)},y=(e,t,n,o)=>{let r=null;const l=n&&n.nextSibiling;"text"===e.type?r=document.createTextNode(e.props.content):(r=document.createElement(e.type),h(r,e)),r.vnode=e,n&&g(o,n),l?t.insertBefore(r,l):t.appendChild(r),e.props.children.forEach(e=>{d(e,r)})},h=(e,t,n={})=>{const o=t.props||{},r=n.props||{};for(let t in{...r,...o}){let n=r[t],l=o[t];if(n==l||"children"===t);else if("style"===t);else if("className"===t)e.setAttribute("class",l);else if(t.startsWith("on")){const o=t.slice(2).toLowerCase();n&&e.removeEventListener(o,n,!1),e.addEventListener(o,l,!1)}else null==l||!1===l?e.removeAttribute(t):e.setAttribute(t,l)}},v=(e,t,n={})=>{t.props.content!==n.props.content&&(e.textContent=t.props.content),e.vnode=t},g=(e,t)=>{t.remove()};e.computed=function(e){let t,n,o=!0;const r=l(e,{lazy:!0,scheduler:e=>{o||(o=!0,c(n,"value"))}});return n={get value(){return o&&(t=r(),o=!1),s(n,"value"),t}},n},e.createApp=e=>({mount(t){i(e,t)}}),e.createElement=function(e,t,...o){let r=t||{},l=r.key||null,s=r.ref||null;delete r.key,delete r.ref;const c=[].concat(...o).reduce((e,t)=>{if(null!==(o=t)&&!1!==o&&!0!==o){const o=(e=>"string"==typeof e||"number"==typeof e)(t)?n(t):t;e.push(o)}var o;return e},[]);return r.children=c,{type:e,props:r,key:l,ref:s}},e.effect=l,e.reactive=function(e){return new Proxy(e,{get:(e,t)=>(s(e,t),Reflect.get(e,t)),set:(e,t,n)=>(Reflect.set(e,t,n),c(e,t),!0)})},e.ref=function(e){let t=e;const n={get value(){return s(n,"value"),t},set value(e){e!==t&&(t=e,c(n,"value"))}};return n},e.render=i,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=uuz.js.map
