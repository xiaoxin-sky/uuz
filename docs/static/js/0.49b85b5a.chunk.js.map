{"version":3,"sources":["controller/picker.ts","views/sub-views/PickerCol.tsx","views/Picker.tsx","views/PickerView.tsx","site/pages/picker/index.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/createClass.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/typeof.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/inherits.js","static/close.svg","views/sub-views/Close.tsx","views/Dialog.tsx","views/Alert.tsx","views/Confirm.tsx","views-show/dialog.tsx","controller/event.ts","views/Transition.tsx","views/Sheet.tsx"],"names":["PickerControl","index","maxIdx","colStyle","LINE_HEIGHT","curY","oldY","isAnm","this","translateY","transition","adjustTranslate","adjustTranIdx","curTransLateY","maxTranslate","curPickIdx","Math","abs","round","e","getEventPoint","pageY","getFinallyTranslate","PickerCol","colRef","list","value","onChange","pickControl","findIndex","val","length","initPickerControl","useState","setColStyle","onStartHandler","onStart","onMoveHandler","stopPropagation","preventDefault","onMove","onEndHandler","onEnd","useEffect","eventControl","EventControl","createEventList","listenerAllOfEle","removeAllOfEle","className","ref","ele","style","transform","map","item","key","label","Picker","data","values","pickValues","setValues","colChangeHandler","idx","pickIdx","oldState","splice","pickerClassName","PickerView","props","indexes","pickObj","setValue","Sheet","ensureHandler","onEnsure","button","Button","TestPicker","values1","setValues1","values2","setValues2","textAlign","margin","console","log","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","self","call","ReferenceError","_setPrototypeOf","p","_inherits","subClass","superClass","create","_extends","assign","arguments","source","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref","svgRef","title","id","x","y","viewBox","enableBackground","xmlSpace","ForwardRef","forwardRef","Close","onClick","width","height","DialogContext","React","createContext","Dialog","children","isBtnCloseOnly","destroy","dialogClassName","setDialogClassName","closeDialog","Provider","onTransitionEnd","Alert","content","useContext","Consumer","Confirm","confirm","onConfirm","cancel","onCancel","type","dialogElement","singleton","ShowSomething","_$ele","renderElement","Component","document","body","appendChild","ReactDOM","render","removeChild","unmountComponentAtNode","show","Error","ShowDialog","ShowAlert","onClose","ShowConfirm","dialog","alert","eventList","willPreventDefault","willNotPreventDefault","$ele","isPassiveSupported","passiveSupported","passive","start","move","end","window","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","forEach","pd","addEventListener","removeEventListener","Transition","name","isShow","time","initName","transitionName","setName","isConShow","setConShow","setTimeout","Children","child","childTs","cloneElement","setIsShow","showSomething","closeSheet","SheetContent","header","titleTxt"],"mappings":"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","file":"static/js/0.49b85b5a.chunk.js","sourcesContent":["import { TouchEvent, MouseEvent } from 'react';\r\nimport { getEventPoint } from '../utils/base';\r\n\r\ntype PickerEvent = TouchEvent<HTMLDivElement> | MouseEvent<HTMLDivElement>;\r\n\r\nclass PickerControl {\r\n    colStyle: {\r\n        translateY: number,\r\n        transition: string\r\n    };\r\n    LINE_HEIGHT: number;\r\n    maxIdx: number\r\n    curY: number;\r\n    oldY: number;\r\n    isAnm: boolean;\r\n\r\n    constructor(index: number, maxIdx: number) {\r\n        this.LINE_HEIGHT = 26;\r\n        this.maxIdx = maxIdx\r\n        this.colStyle = {\r\n            translateY: - (index * this.LINE_HEIGHT),\r\n            transition: 'none',\r\n        }\r\n        this.curY = 0;\r\n        this.oldY = 0;\r\n        this.isAnm = false;\r\n    }\r\n\r\n    getFinallyTranslate() {\r\n        let adjustTranslate, adjustTranIdx;\r\n        const curTransLateY = this.colStyle.translateY;\r\n        const maxTranslate = - this.maxIdx * this.LINE_HEIGHT;\r\n\r\n        if (curTransLateY > 0) {\r\n            adjustTranslate = 0;\r\n            adjustTranIdx = 0;\r\n        } else if (curTransLateY < maxTranslate) {\r\n            adjustTranslate = maxTranslate;\r\n            adjustTranIdx = this.maxIdx;\r\n        } else {\r\n            const curPickIdx = Math.abs(Math.round(curTransLateY / this.LINE_HEIGHT));\r\n            adjustTranslate = - curPickIdx * this.LINE_HEIGHT;\r\n            adjustTranIdx = curPickIdx;\r\n        }\r\n\r\n        return { adjustTranIdx, adjustTranslate };\r\n    }\r\n\r\n    onStart(e: PickerEvent) {\r\n        this.curY = getEventPoint(e).pageY;\r\n        this.oldY = this.colStyle.translateY;\r\n        this.isAnm = true;\r\n    }\r\n\r\n    onMove(e: PickerEvent) {\r\n        if (this.isAnm) {\r\n            const translateY = getEventPoint(e).pageY - this.curY;\r\n            this.colStyle = {\r\n                translateY: translateY + this.oldY,\r\n                transition: 'none'\r\n            };\r\n        }\r\n    }\r\n\r\n    onEnd(): number {\r\n        this.isAnm = false;\r\n        const { adjustTranIdx, adjustTranslate } = this.getFinallyTranslate();\r\n        this.colStyle = {\r\n            translateY: adjustTranslate,\r\n            transition: 'all 0.3s'\r\n        }\r\n        return adjustTranIdx;\r\n    }\r\n}\r\n\r\nexport default PickerControl;","import React, { useState, useEffect, TouchEvent, MouseEvent } from 'react';\r\nimport PickerControl from '../../controller/picker';\r\n\r\nimport EventControl from '../../controller/event';\r\n\r\ninterface PickerColProps {\r\n    list: Array<any>,\r\n    value: ValueType,\r\n    onChange?: Function\r\n}\r\n\r\ntype ValueType = string | number;\r\ntype PickerEvent = TouchEvent<HTMLDivElement> | MouseEvent<HTMLDivElement>;\r\n\r\nexport default function PickerCol({list, value, onChange}: PickerColProps) {\r\n\r\n    let colRef: HTMLDivElement | null;\r\n\r\n    function initPickerControl (list: Array<any>, value: ValueType) {\r\n        let index = list.findIndex(val => val.value === value);\r\n        index = index === -1 ? 0 : index;\r\n        return new PickerControl(index, list.length-1);\r\n    }\r\n\r\n    const pickControl = initPickerControl(list, value);\r\n    const [colStyle, setColStyle] = useState(pickControl.colStyle)\r\n\r\n    const onStartHandler = (e: PickerEvent) => {\r\n        pickControl.onStart(e);\r\n    }\r\n\r\n    const onMoveHandler = (e: PickerEvent) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        pickControl.onMove(e);\r\n        setColStyle(pickControl.colStyle);\r\n    }\r\n\r\n    const onEndHandler = (e: PickerEvent) => {\r\n        const adjustTranIdx = pickControl.onEnd();\r\n        setColStyle(pickControl.colStyle);\r\n        const value = list[adjustTranIdx].value;\r\n        if (typeof onChange === 'function') {\r\n            onChange(value)\r\n        }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        const eventControl = new EventControl(colRef as HTMLDivElement);\r\n        eventControl.createEventList(onStartHandler, onMoveHandler, onEndHandler);\r\n        eventControl.listenerAllOfEle();\r\n        return () => {\r\n            eventControl.removeAllOfEle();\r\n        }\r\n    }, [])\r\n\r\n    return <div className=\"zui-picker-col\">\r\n        <div\r\n            className=\"zui-picker-col-mask\"\r\n            ref={ele => colRef = ele}>\r\n        </div>\r\n        <div\r\n            className=\"zui-picker-col-area\"\r\n            style={{\r\n                transition: colStyle.transition,\r\n                transform: `translateY(${colStyle.translateY}px)`,\r\n            }}>\r\n            {\r\n                list.map(item=> <div className=\"zui-picker-item\"\r\n                    key={item.value}>{item.label}</div>)\r\n            }\r\n        </div>\r\n    </div>\r\n}","import React, { useState } from 'react';\r\nimport PickerCol from './sub-views/PickerCol';\r\n\r\n// import { typeCheck } from '../utils/base';\r\n\r\nexport interface PickerProps {\r\n    data: Array<Array<{[key: string]: string}>>,\r\n    values: Array<string | number>,\r\n    className?: string,\r\n    onChange?: Function\r\n}\r\n\r\nfunction Picker({data, values, className, onChange}: PickerProps) {\r\n\r\n    const [pickValues, setValues] = useState(['', '']);\r\n\r\n    // if (typeCheck([\r\n    //     ['data', data, 'Array'],\r\n    //     ['values', values, 'Array'],\r\n    //     ['className', className, 'String', 'Undefined', 'Null'],\r\n    //     ['onChange', onChange, 'Function', 'Undefined', 'Null']\r\n    // ])) return null;\r\n\r\n    const colChangeHandler = (idx: number) => (value: string, pickIdx: number) => {\r\n        setValues((oldState) => {\r\n            oldState.splice(idx, 1, value);\r\n            return oldState;\r\n        })\r\n        onChange && onChange(pickValues);\r\n    }\r\n\r\n    const pickerClassName = `zui-picker ${className || ''}`\r\n\r\n    return <div className={pickerClassName}>\r\n        {\r\n            data.map((list, idx) => <PickerCol\r\n                key={idx}\r\n                value={values[idx]}\r\n                list={list}\r\n                onChange={colChangeHandler(idx)}\r\n            ></PickerCol>)\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default Picker;","import React, { useState } from 'react';\r\n\r\nimport Sheet from './Sheet';\r\nimport Button from './Button';\r\nimport Picker from './Picker'\r\n\r\ninterface PickerViewProps {\r\n    data: Array<Array<{[key: string]: string}>>,\r\n    values: Array<string | number>,\r\n    onChange?: Function,\r\n    onEnsure?: Function\r\n}\r\n\r\ninterface GlobalAttr {\r\n    values: Array<string>,\r\n    indexes: Array<number>\r\n}\r\n\r\nfunction PickerView(props: PickerViewProps) {\r\n\r\n    const [pickObj, setValue] = useState({values: [], indexes: []} as GlobalAttr);\r\n\r\n    const ensureHandler = () => {\r\n        if (typeof props.onEnsure === 'function') {\r\n            props.onEnsure(pickObj.values, pickObj.indexes)\r\n        }\r\n    }\r\n\r\n    const changeHandler = (values: Array<string>, indexes: Array<number>) => {\r\n        setValue({ values, indexes });\r\n        if (typeof props.onChange === 'function') {\r\n            props.onChange(values, indexes)\r\n        }\r\n    }\r\n\r\n    return <Sheet\r\n        ensureHandler={ensureHandler}\r\n        button={<Button>弹出Picker</Button>}>\r\n        <Picker\r\n            className=\"zui-picker-view\"\r\n            data={props.data}\r\n            values={props.values}\r\n            onChange={changeHandler}\r\n        ></Picker>\r\n    </Sheet>\r\n}\r\n\r\nexport default PickerView;","import React, { useState } from 'react';\r\n\r\nimport Picker from '../../../views/Picker';\r\nimport PickerView from '../../../views/PickerView';\r\n\r\nconst data = [\r\n    [\r\n        {\r\n            value: '1',\r\n            label: 'test1'\r\n        },{\r\n            value: '2',\r\n            label: 'test2'\r\n        },{\r\n            value: '3',\r\n            label: 'test3'\r\n        },{\r\n            value: '4',\r\n            label: 'test4'\r\n        },{\r\n            value: '5',\r\n            label: 'test5'\r\n        },\r\n    ], [\r\n        {\r\n            value: '11',\r\n            label: '测试1'\r\n        },{\r\n            value: '22',\r\n            label: '测试2'\r\n        },{\r\n            value: '33',\r\n            label: '测试3'\r\n        },{\r\n            value: '44',\r\n            label: '测试4'\r\n        },{\r\n            value: '55',\r\n            label: '测试5'\r\n        },\r\n    ]\r\n]\r\n\r\n\r\nconst TestPicker = () => {\r\n\r\n    const [values1, setValues1] = useState(['2', '44']);\r\n    const [values2, setValues2] = useState(['3', '22']);\r\n\r\n\r\n    const changeHandler = (values) => {\r\n        setValues1(values);\r\n        console.log(values);\r\n    }\r\n\r\n    const changeHandler2 = (values) => {\r\n        setValues2(values);\r\n        console.log(values);\r\n    }\r\n\r\n    const ensureHandler = (values) => {\r\n        console.log(values);\r\n    }\r\n\r\n    return <div>\r\n        <div style={{textAlign: 'center', margin: '33px 0'}}>\r\n            <p>使用了 touch 事件</p>\r\n            <p>需使用手机模式</p>\r\n        </div>\r\n        <Picker\r\n            data={data}\r\n            values={values1}\r\n            onChange={changeHandler}>\r\n        </Picker>\r\n        <br></br>\r\n        <PickerView\r\n            data={data}\r\n            values={values2}\r\n            onChange={changeHandler2}\r\n            onEnsure={ensureHandler}>\r\n        </PickerView>\r\n    </div>\r\n}\r\n\r\nexport default TestPicker;","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M147.421,0C66.133,0,0,66.133,0,147.421s66.133,147.421,147.421,147.421c38.287,0,74.567-14.609,102.159-41.136 c2.389-2.296,2.464-6.095,0.167-8.483c-2.295-2.388-6.093-2.464-8.483-0.167c-25.345,24.367-58.672,37.786-93.842,37.786 C72.75,282.843,12,222.093,12,147.421S72.75,12,147.421,12s135.421,60.75,135.421,135.421c0,16.842-3.052,33.273-9.071,48.835 c-1.195,3.091,0.341,6.565,3.432,7.761c3.092,1.193,6.565-0.341,7.761-3.432c6.555-16.949,9.879-34.836,9.879-53.165 C294.843,66.133,228.71,0,147.421,0z\"\n}), React.createElement(\"path\", {\n  d: \"M167.619,160.134c-2.37-2.319-6.168-2.277-8.485,0.09c-2.318,2.368-2.277,6.167,0.09,8.485l47.236,46.236 c1.168,1.143,2.683,1.712,4.197,1.712c1.557,0,3.113-0.603,4.288-1.803c2.318-2.368,2.277-6.167-0.09-8.485L167.619,160.134z\"\n}), React.createElement(\"path\", {\n  d: \"M125.178,133.663c1.171,1.171,2.707,1.757,4.243,1.757s3.071-0.586,4.243-1.757c2.343-2.343,2.343-6.142,0-8.485 L88.428,79.942c-2.343-2.343-6.143-2.343-8.485,0c-2.343,2.343-2.343,6.142,0,8.485L125.178,133.663z\"\n}), React.createElement(\"path\", {\n  d: \"M214.9,79.942c-2.343-2.343-6.143-2.343-8.485,0L79.942,206.415c-2.343,2.343-2.343,6.142,0,8.485 c1.171,1.171,2.707,1.757,4.243,1.757s3.071-0.586,4.243-1.757L214.9,88.428C217.243,86.084,217.243,82.286,214.9,79.942z\"\n}));\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 294.843 294.843\",\n    style: {\n      enableBackground: \"new 0 0 294.843 294.843\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.89f5918b.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\r\n\r\nimport { ReactComponent as CloseSvg } from '../../static/close.svg'\r\n\r\ninterface ClickProps {\r\n    className?: string,\r\n    onClick?: Function\r\n}\r\n\r\nexport default function Close(props: ClickProps) {\r\n\r\n    const clickHandler = () => {\r\n        (typeof props.onClick === 'function') && props.onClick();\r\n    }\r\n    \r\n    return <CloseSvg\r\n        className={props.className || ''}\r\n        onClick={clickHandler}\r\n        width=\"16px\"\r\n        height=\"16px\">\r\n    </CloseSvg>\r\n}","import React, { useState } from 'react';\r\nimport Close from './sub-views/Close';\r\n\r\n// import { typeCheck } from '../utils/base';\r\n\r\ninterface DialogProps{\r\n    children: React.ReactNode,\r\n    isBtnCloseOnly?: boolean,\r\n    destroy?: Function\r\n}\r\n\r\n// conext\r\nexport const DialogContext = React.createContext(() => {});\r\n\r\nexport default function Dialog({children, isBtnCloseOnly, destroy}: DialogProps) {\r\n\r\n    const [dialogClassName, setDialogClassName] = useState('zui-dialog');\r\n\r\n    // if (typeCheck([\r\n    //     ['children', children, 'Element', 'String'],\r\n    //     ['isBtnCloseOnly', isBtnCloseOnly, 'Boolean', 'Undefined'],\r\n    //     ['destroy', destroy, 'Function', 'Undefined', 'Null'],\r\n    // ])) return null;\r\n\r\n    const closeDialog = () => {\r\n        setDialogClassName('zui-dialog zui-dialog-quit');\r\n    }\r\n\r\n    const modalHandler = () => {\r\n        if (isBtnCloseOnly) return;\r\n        closeDialog();\r\n    }\r\n\r\n    const tansitionEndHandler = () => {\r\n        (typeof destroy === 'function') && destroy();\r\n    }\r\n\r\n    return <DialogContext.Provider value={closeDialog}> {/** context 注入 */}\r\n        <div className={dialogClassName} \r\n            onTransitionEnd={tansitionEndHandler}>\r\n            <div className=\"zui-dialog-mask\" onClick={modalHandler}></div>\r\n            <div className=\"zui-dialog-area\">\r\n                {\r\n                    isBtnCloseOnly ?\r\n                        null:\r\n                        <Close className=\"zui-dialog-close\" onClick={closeDialog}></Close>\r\n                }\r\n                { children }\r\n            </div>\r\n        </div>\r\n    </DialogContext.Provider>\r\n}\r\n","import React, { useContext } from 'react';\r\nimport Dialog, { DialogContext } from './Dialog';\r\nimport Button from './Button';\r\n\r\nimport { typeCheck } from '../utils/base';\r\n\r\ninterface Alertprops {\r\n    destroy?: Function,\r\n    title?: React.ReactNode,\r\n    content: React.ReactNode\r\n}\r\n\r\nexport default function Alert({destroy, title, content}: Alertprops) {\r\n\r\n    useContext(DialogContext);\r\n\r\n    // if (typeCheck([\r\n    //     ['destroy', destroy, 'Function', 'Undefined', 'Null'],\r\n    //     ['title', title, 'String', 'Undefined', 'Null'],\r\n    //     ['content', content, 'String'],\r\n    // ])) return null;\r\n\r\n    return <Dialog isBtnCloseOnly destroy={destroy}>\r\n        <div className=\"zui-alert-title\">{title}</div>\r\n        <div className=\"zui-alert-content\">{content}</div>\r\n        {/* 利用 context 实现 slot 传参 */}\r\n        <DialogContext.Consumer>\r\n            {closeDialog => <Button onClick={closeDialog}>知道了</Button>}\r\n        </DialogContext.Consumer>\r\n    </Dialog>\r\n}\r\n","import React, { useContext } from 'react';\r\nimport Dialog, { DialogContext } from './Dialog';\r\nimport Button from './Button';\r\n\r\ninterface Confirmprops {\r\n    destroy?: Function,\r\n    onCancel?: Function,\r\n    onConfirm?: Function,\r\n    title?: React.ReactNode,\r\n    content: React.ReactNode\r\n}\r\n\r\nexport default function Confirm(props: Confirmprops) {\r\n\r\n    useContext(DialogContext);\r\n\r\n    const confirm = (closeDialog: Function) => () => {\r\n        if (typeof props.onConfirm === 'function') {\r\n            props.onConfirm();\r\n        }\r\n        closeDialog();\r\n    }\r\n\r\n    const cancel = (closeDialog: Function) => () => {\r\n        if (typeof props.onCancel === 'function') {\r\n            props.onCancel();\r\n        }\r\n        closeDialog();\r\n    }\r\n\r\n    return <Dialog isBtnCloseOnly destroy={props.destroy}>\r\n        <div className=\"zui-confirm-title\">{props.title}</div>\r\n        <div className=\"zui-confirm-content\">{props.content}</div>\r\n        {/* 利用 context 实现 slot 传参 */}\r\n        <DialogContext.Consumer>\r\n            {closeDialog => <div className=\"zui-confirm-btn-box\">\r\n                <Button type=\"raw\" onClick={cancel(closeDialog)}>取消</Button>\r\n                <Button onClick={confirm(closeDialog)}>确定</Button>\r\n            </div>}\r\n        </DialogContext.Consumer>\r\n    </Dialog>\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Dialog from '../views/Dialog'\r\nimport Alert from '../views/Alert';\r\nimport Confirm from '../views/Confirm';\r\n\r\nimport { singleton } from '../utils/base'\r\n\r\nconst dialogElement = singleton();\r\n\r\nclass ShowSomething {\r\n\r\n    _$ele: HTMLDivElement | undefined;\r\n\r\n    renderElement = (Component: React.FunctionComponentElement<any>) => {\r\n        this._$ele = dialogElement(document.createElement('div')) as HTMLDivElement;\r\n        document.body.appendChild(this._$ele);\r\n        ReactDOM.render(Component, this._$ele);\r\n    }\r\n\r\n    destroy = () => {\r\n        if (this._$ele)  {\r\n            document.body.removeChild(this._$ele);\r\n            ReactDOM.unmountComponentAtNode(this._$ele);\r\n        }\r\n    }\r\n\r\n    show: Function = () => new Error('需要重写 show 方法');\r\n\r\n}\r\n\r\n/* \r\n    Dialog\r\n*/\r\nclass ShowDialog extends ShowSomething{\r\n    show = (children: React.ReactNode) => {\r\n        this.renderElement(<Dialog destroy={this.destroy}>{children}</Dialog>)\r\n    }\r\n}\r\n\r\n/* \r\n    Alert\r\n*/\r\ninterface AlertProps {\r\n    onClose?: Function,\r\n    title?: React.ReactNode,\r\n    content: React.ReactNode\r\n}\r\n\r\nclass ShowAlert extends ShowSomething{\r\n    show = (props: AlertProps) => {\r\n        const destroy = () => {\r\n            if (typeof props.onClose === 'function') {\r\n                props.onClose();\r\n            }\r\n            this.destroy();\r\n        }\r\n        this.renderElement(<Alert destroy={destroy} {...props}></Alert>)\r\n    }\r\n}\r\n\r\n/* \r\n    Confirm\r\n*/\r\ninterface ConfirmProps {\r\n    onCancel?: Function,\r\n    onConfirm?: Function,\r\n    title?: React.ReactNode,\r\n    content: React.ReactNode\r\n}\r\n\r\nclass ShowConfirm extends ShowSomething {\r\n    show = (props: ConfirmProps) => {\r\n        this.renderElement(<Confirm destroy={this.destroy} {...props}></Confirm>)\r\n    }\r\n}\r\n\r\n/*\r\n    导出\r\n */\r\nexport {\r\n    ShowSomething\r\n};\r\nexport const dialog = new ShowDialog();\r\nexport const alert = new ShowAlert();\r\nexport const confirm = new ShowConfirm();\r\n","import { passiveSupported } from \"../utils/base\";\r\n\r\nclass EventControl {\r\n    \r\n    eventList: {[key: string]: Function};\r\n    willPreventDefault: object | boolean;\r\n    willNotPreventDefault: object | boolean;\r\n    $ele: HTMLDivElement;\r\n\r\n    constructor(ele: HTMLDivElement) {\r\n        this.eventList = {};\r\n        const isPassiveSupported = passiveSupported();\r\n        this.willPreventDefault = isPassiveSupported ? { passive: false } : false;\r\n        this.willNotPreventDefault = isPassiveSupported ? { passive: true } : false;\r\n        this.$ele = ele;\r\n    }\r\n\r\n    createEventList(start: Function, move: Function, end: Function) {\r\n        if ('ontouchstart' in window) {\r\n            this.eventList =  {\r\n                touchstart: start,\r\n                touchmove: move,\r\n                touchend: end,\r\n            }\r\n        } else {\r\n            this.eventList =  {\r\n                mousedown: start,\r\n                mousemove: move,\r\n                mouseup: end,\r\n            }\r\n        }\r\n    }\r\n\r\n    listenerAllOfEle() {\r\n        Object.keys(this.eventList).forEach(key => {\r\n            const pd = key.indexOf('move') >= 0 ? this.willPreventDefault : this.willNotPreventDefault;\r\n            this.$ele.addEventListener(key, this.eventList[key] as any, pd as any);\r\n        })\r\n    }\r\n\r\n    removeAllOfEle() {\r\n        Object.keys(this.eventList).forEach(key => {\r\n            this.$ele.removeEventListener(key, this.eventList[key] as any);\r\n        })\r\n    }\r\n}\r\n\r\nexport default EventControl;\r\n","import React, {useState, useEffect} from 'react';\r\n\r\ninterface TransitionProps {\r\n    name: string,\r\n    isShow: boolean,\r\n    children: React.ReactNode,\r\n    time?: number\r\n}\r\n\r\nexport default function Transition({name, isShow, children, time = 300}: TransitionProps) {\r\n\r\n    const initName = name || '';\r\n\r\n    const [transitionName, setName] = useState('');\r\n    const [isConShow, setConShow] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (isShow) {\r\n            setConShow(true);\r\n            setTimeout(() => {\r\n                setName(`${initName}--in`);\r\n            }, 34); // 下两帧\r\n        }\r\n        return () => {\r\n            // 当销毁时 设置 class 为 out\r\n            if (!isConShow && isShow) {\r\n                setName(`${initName}--out`);\r\n                // 正常关闭\r\n                setTimeout(() => {\r\n                    setConShow(false);\r\n                    setName('');\r\n                }, time);\r\n                // TODO\r\n                // 也可以通过 transitionEnd 来计算结束时间\r\n                // 但是如果没有设置动画效果那么怎么办？\r\n                // 如何判断是否有动画效果？\r\n            }\r\n        }\r\n    }, [isShow])\r\n\r\n    return <>\r\n        {\r\n            isConShow ?\r\n                React.Children.map(children, (child) => {\r\n                    const childTs = child as React.DetailedReactHTMLElement<any, HTMLElement>;\r\n                    return React.cloneElement(childTs,\r\n                        {\r\n                            className:  `${childTs.props.className} ${transitionName}`,\r\n                        },\r\n                        // children // 外包裹\r\n                    )\r\n                })\r\n                : null\r\n        }\r\n    </>\r\n}\r\n","import React, { useState, ReactNode, MouseEvent, useEffect } from 'react';\r\nimport Transition from './Transition';\r\n\r\nimport { ShowSomething } from '../views-show/dialog';\r\n\r\ninterface SheetProps {\r\n    children: ReactNode,\r\n    button: ReactNode, // 触发Sheet的按钮\r\n    header?: ReactNode,\r\n    titleTxt?: string,\r\n    canModalClose?: boolean,\r\n    ensureHandler?: Function\r\n}\r\n\r\nexport default  function Sheet(props: SheetProps) {\r\n    const [isShow, setIsShow] = useState(false);\r\n    const [showSomething] = useState(new ShowSomething());\r\n\r\n    const modalHandler = () => {\r\n        setIsShow(false);\r\n    }\r\n\r\n    const closeSheet = () => {\r\n        setIsShow(false);\r\n    }\r\n\r\n    const clickHandler = (e: MouseEvent<HTMLElement>): void => {\r\n        // e.cancelBubble = true; // 阻止冒泡\r\n        e.stopPropagation(); // 阻止冒泡\r\n        if (typeof props.ensureHandler === 'function') {\r\n            props.ensureHandler();\r\n        }\r\n        closeSheet();\r\n    }\r\n\r\n    const preventHandler = (e: React.TouchEvent<HTMLElement>) => {\r\n        console.log(e.preventDefault, 11111)\r\n        e.preventDefault && e.preventDefault();\r\n    }\r\n\r\n    useEffect(() => {\r\n        showSomething.renderElement(SheetContent);\r\n    });\r\n\r\n    useEffect(() => {\r\n        return () => showSomething.destroy();\r\n    }, [])\r\n\r\n    const SheetContent = (\r\n        <Transition name=\"zui-sheet\" isShow={isShow}>\r\n            <div className='zui-sheet-box'>\r\n                <div className=\"zui-sheet-mask\" onClick={modalHandler}></div>\r\n                {/* sheet主体 */}\r\n                <div className=\"zui-sheet-area\">\r\n                    {/* 头部信息 */}\r\n                    {\r\n                        props.header ?\r\n                            props.header :\r\n                            <div className=\"zui-sheet-header\">\r\n                                <div onClick={closeSheet}>取消</div>\r\n                                <div>{props.titleTxt || ''}</div>\r\n                                <div onClick={clickHandler}>确定</div>\r\n                            </div>\r\n                    }\r\n                    {/* 内容部分 */}\r\n                    <div\r\n                        className=\"zui-sheet-body\"\r\n                    >{props.children}</div>\r\n                </div>\r\n            </div>\r\n        </Transition>\r\n    )\r\n    \r\n    return <>\r\n        <div onClick={() => setIsShow(true)}>{props.button}</div>\r\n    </>\r\n}\r\n"],"sourceRoot":""}