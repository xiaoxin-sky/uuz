{"version":3,"sources":["controller/swiper.ts","views/Swiper.tsx","site/pages/swiper/index.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","controller/event.ts","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","controller/move.ts"],"names":["SwiperControl","curIdx","direction","len","justifyDistance","swiperRange","range","this","lockDirection","distance","endPoint","MoveControl","Swiper","refSwiper","children","width","height","className","useState","curSwiperIdx","setCurTabIdx","x","y","swiperPoint","setSwiperPoint","tansitionStyle","setTansitionStyle","swiperControl","length","swiperClassNames","swiperStyle","getValOrDefault","onStartHander","event","start","onMoveHander","point","move","onEndHander","end","getIndex","useEffect","setSwiperRange","offsetWidth","offsetHeight","eventControl","EventControl","createEventList","listenerAllOfEle","removeAllOfEle","concat","getClassName","ref","ele","style","transform","transition","SwiperNav","curActiveIdx","Array","fill","map","val","idx","key","TestContent","background","display","justifyContent","alignItems","Item","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","eventList","willPreventDefault","willNotPreventDefault","$ele","isPassiveSupported","passiveSupported","passive","touchstart","mousedown","touchmove","mousemove","touchend","mouseup","keys","forEach","pd","indexOf","addEventListener","removeEventListener","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_typeof2","obj","Symbol","iterator","constructor","_typeof","_possibleConstructorReturn","self","call","ReferenceError","_setPrototypeOf","p","_inherits","subClass","superClass","create","value","zeroPoint","JSON","stringify","startPoint","Prevent_Distance","isAnm","parse","Error","absX","Math","abs","absY","stopPropagation","getEventPoint","pageX","pageY","preventDefault","assign","getDist","_getLockDirection","_getFinalEndPonit"],"mappings":"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","file":"static/js/1.398303e1.chunk.js","sourcesContent":["import MoveControl from './move';\n\ntype Point = {\n    x: number,\n    y: number\n}\n\ntype Direction = 'x' | 'y';\n\ninterface SwiperControlProps {\n    curIdx: number,\n    direction: Direction,\n    len: number,\n    justifyDistance?: number,\n}\n\nclass SwiperControl extends MoveControl {\n\n    swiperRange: number;\n    justifyDistance: number;\n    len: number;\n    curIdx: number;\n\n    constructor({curIdx = 0, direction = 'x', len, justifyDistance = 33}: SwiperControlProps) {\n        super({\n            direction,\n        });\n        this.len = len;\n        this.curIdx = curIdx;\n        this.justifyDistance = justifyDistance;\n        this.swiperRange = 0;\n    }\n\n    // 可能横竖屏 或者 使用者改变 Swiper大小\n    // 所以宽高是动态获取的\n    setSwiperRange(range: number) {\n        this.swiperRange = range;\n    }\n\n    getIndex(): number {\n        return this.curIdx;\n    }\n\n    // 终止时位置调整\n    _getFinalEndPonit(): Point {\n        if (this.direction === this.lockDirection) {\n            const distance = this.distance[this.direction];\n            if (distance > this.justifyDistance) {\n                if (this.curIdx < this.len - 1) {\n                    this.curIdx++;\n                    this.endPoint[this.direction] -= this.swiperRange;\n                }\n            } else if (distance < this.justifyDistance) {\n                if (this.curIdx > 0) {\n                    this.curIdx--;\n                    this.endPoint[this.direction] += this.swiperRange;\n                }\n            }\n        }\n        return this.endPoint;\n    }\n\n}\n\nexport default SwiperControl;\n","import React, { useState, useEffect } from 'react';\n\nimport SwiperControl from '../controller/swiper';\nimport { getClassName, getValOrDefault } from '../utils/base';\nimport EventControl from '../controller/event';\n\ntype UseEvent = React.TouchEvent<HTMLDivElement> | React.MouseEvent<HTMLDivElement>;\n\ninterface SwiperProps {\n    children: React.ReactNodeArray,\n    width: string,\n    height: string,\n    direction: 'x' | 'y',\n    className: string\n}\n\nexport default function Swiper ({\n            children, width, height,\n            direction = 'x', className\n        }: SwiperProps) {\n    \n    const [curSwiperIdx, setCurTabIdx] = useState(0);\n    const [swiperPoint, setSwiperPoint] = useState({ x: 0, y: 0});\n    const [tansitionStyle, setTansitionStyle] = useState('');\n\n    const swiperControl = new SwiperControl({\n        curIdx: 0,\n        direction,\n        len: children.length\n    });\n\n    let refSwiper: HTMLDivElement | null;\n\n    const swiperClassNames = {\n        [className]: !!className,\n        [`zui-swiper-${direction}`]: true\n    }\n\n    const swiperStyle: React.CSSProperties = {\n        width: getValOrDefault(width, ''),\n        height: getValOrDefault(height, '')\n    }\n\n    const onStartHander = (event: UseEvent) => {\n        swiperControl.start(event);\n        setTansitionStyle('');\n    }\n\n    const onMoveHander = (event: UseEvent) => {\n        const point = swiperControl.move(event);\n        setSwiperPoint(point);\n    }\n\n    const onEndHander = () => {\n        const point = swiperControl.end();\n        setCurTabIdx(swiperControl.getIndex());\n        setSwiperPoint(point);\n        setTansitionStyle('all 0.3s');\n    }\n\n    useEffect(() => {\n        if (direction === 'x') {\n            swiperControl.setSwiperRange(refSwiper!.offsetWidth);\n        } else {\n            swiperControl.setSwiperRange(refSwiper!.offsetHeight);\n        }\n\n        const eventControl = new EventControl(refSwiper as HTMLDivElement);\n        eventControl.createEventList(onStartHander, onMoveHander, onEndHander);\n        eventControl.listenerAllOfEle();\n\n        return () => {\n            eventControl.removeAllOfEle();\n        };\n    }, [])\n\n    return <div className={'zui-swiper'.concat(getClassName(swiperClassNames))}\n        ref={ele => refSwiper = ele}\n        style={swiperStyle}>\n        <div className=\"zui-swiper-body\" style={{\n            transform: `translate(${swiperPoint.x}px, ${swiperPoint.y}px)`,\n            transition: tansitionStyle\n        }}>\n            { children }\n        </div>\n        <SwiperNav\n            len={children.length}\n            curActiveIdx={curSwiperIdx}\n        ></SwiperNav>\n    </div>\n}\n\nSwiper.Item = ({children}: {children: React.ReactNode}): JSX.Element => {\n    return <div className=\"zui-swiper-item\">{children}</div>\n};\n\nfunction SwiperNav({len, curActiveIdx}: {\n            len: number,\n            curActiveIdx: number\n        }): JSX.Element {\n    return <div className=\"zui-swiper-nav-box\">\n        {\n            Array(len).fill('').map((val, idx) => \n            <span\n                key={idx}\n                className={'zui-swiper-nav'.concat(curActiveIdx === idx ? ' active' : '')}\n            ></span>)\n        }\n    </div>\n}\n","import React from 'react';\n\nimport Swiper from '../../../views/Swiper';\n\nfunction TestContent({val, children}) {\n    return <div style={{\n        height: '100%',\n        // background: `rgb(33, 133, ${val*51})`,\n        background: 'white',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n    }}>{children}{val}</div>\n}\n\nexport default () => {\n    return <div>\n        <Swiper height={'333px'} direction=\"y\">\n            {\n                [1,2,3,4,5].map(val => <Swiper.Item key={val}>\n                    <TestContent val={val}>上下滑</TestContent>\n                </Swiper.Item>)\n            }\n        </Swiper>\n        <br></br>\n        <Swiper height={'333px'}>\n            {\n                [1,2,3,4,5].map(val => <Swiper.Item key={val}>\n                    <TestContent val={val}>左右滑</TestContent>\n                </Swiper.Item>)\n            }\n        </Swiper>\n    </div>\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { passiveSupported } from \"../utils/base\";\n\nclass EventControl {\n    \n    eventList: {[key: string]: Function};\n    willPreventDefault: object | boolean;\n    willNotPreventDefault: object | boolean;\n    $ele: HTMLDivElement;\n\n    constructor(ele: HTMLDivElement) {\n        this.eventList = {};\n        const isPassiveSupported = passiveSupported();\n        this.willPreventDefault = isPassiveSupported ? { passive: false } : false;\n        this.willNotPreventDefault = isPassiveSupported ? { passive: true } : false;\n        this.$ele = ele;\n    }\n\n    createEventList(start: Function, move: Function, end: Function) {\n        this.eventList =  {\n            touchstart: start,\n            mousedown: start,\n            touchmove: move,\n            mousemove: move,\n            touchend: end,\n            mouseup: end,\n        }\n    }\n\n    listenerAllOfEle() {\n        Object.keys(this.eventList).forEach(key => {\n            const pd = key.indexOf('move') >= 0 ? this.willPreventDefault : this.willNotPreventDefault;\n            this.$ele.addEventListener(key, this.eventList[key] as any, pd as any);\n        })\n    }\n\n    removeAllOfEle() {\n        Object.keys(this.eventList).forEach(key => {\n            this.$ele.removeEventListener(key, this.eventList[key] as any);\n        })\n    }\n}\n\nexport default EventControl;\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import { getEventPoint } from \"../utils/base\";\n\ntype Point = {\n    x: number,\n    y: number\n}\n\ntype Direction = 'x' | 'y';\n\ntype UseEvent = React.TouchEvent<HTMLDivElement> | React.MouseEvent<HTMLDivElement>;\n\ninterface MoveControlProps {\n    direction?: Direction\n}\n\nconst zeroPoint = JSON.stringify({ x: 0, y: 0 });\n\nclass MoveControl {\n\n    startPoint: Point;\n    distance: Point;\n    endPoint: Point;\n    direction: Direction;\n    Prevent_Distance: number;\n    lockDirection: Direction | null;\n    isAnm: boolean;\n\n    constructor({direction = 'x'}: MoveControlProps) {\n        this.direction = direction;\n        this.startPoint = JSON.parse(zeroPoint);\n        this.distance = JSON.parse(zeroPoint);\n        this.endPoint = JSON.parse(zeroPoint);\n        this.Prevent_Distance = 5;\n        this.lockDirection = null;\n        this.isAnm = false;\n    }\n\n    // 终止时位置调整\n    _getFinalEndPonit(): Point {\n        throw Error('_getFinalEndPonit 需要被重写');\n    }\n\n    // 方向锁定\n    _getLockDirection(): Direction | null {\n        const absX = Math.abs(this.distance.x);\n        const absY = Math.abs(this.distance.y);\n\n        let lockDirection: Direction | null = null;\n\n        if (this.direction === 'x') {\n            if (absX >= absY && absX > this.Prevent_Distance) {\n                lockDirection = 'x';\n            } else if (absY > this.Prevent_Distance) {\n                lockDirection = 'y';\n            }\n        } else {\n            if (absY >= absX && absY > this.Prevent_Distance) {\n                lockDirection = 'y';\n            } else if (absX > this.Prevent_Distance) {\n                lockDirection = 'x';\n            }\n        }\n        \n        return lockDirection;\n    }\n\n    getDist() {\n        const dist = this.endPoint[this.direction] - this.distance[this.direction];\n        return dist;\n    }\n\n    start(event: UseEvent): void {\n        event.stopPropagation();\n        this.isAnm = true;\n        const point = getEventPoint(event);\n        this.lockDirection = null;\n        this.startPoint = {\n            x: point.pageX,\n            y: point.pageY\n        }\n    }\n\n    move(event: UseEvent): Point {\n        if (this.isAnm) {\n            event.stopPropagation();\n            const point = getEventPoint(event);\n            this.distance = {\n                x: this.startPoint.x - point.pageX,\n                y: this.startPoint.y - point.pageY,\n            }\n            if (!this.lockDirection) {\n                // event.preventDefault();\n                this.lockDirection = this._getLockDirection();\n            } else if (this.direction === this.lockDirection) {\n                event.preventDefault();\n                return Object.assign({x: 0, y: 0}, {[this.direction]: this.getDist()})\n            }\n        }\n        // 如果return movePoint 那么位置不变\n        return this.endPoint;\n    }\n\n    end(): Point {\n        this.isAnm = false;\n        return this._getFinalEndPonit();\n    }\n\n}\n\nexport default MoveControl;\n"],"sourceRoot":""}