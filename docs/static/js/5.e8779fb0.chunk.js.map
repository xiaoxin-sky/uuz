{"version":3,"sources":["static/arrow.svg","views/Keyboard.tsx","site/pages/keyboard/index.js","views/Transition.tsx","views/Sheet.tsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","fill","_ref3","_ref4","_ref5","_ref","svgRef","title","props","id","enableBackground","height","viewBox","width","ref","ForwardRef","forwardRef","Keyboard","emitButton","header","onChange","useState","keyList","setKeyList","changeKeyList","join","keyClickHandler","val","keyListCopy","slice","push","Sheet","button","canModalClose","className","map","Button","type","onClick","pop","value","setValue","style","margin","Transition","name","isShow","children","time","initName","transitionName","setName","isConShow","setConShow","useEffect","setTimeout","React","Children","child","childTs","cloneElement","setIsShow","closeSheet","titleTxt","e","stopPropagation","ensureHandler"],"mappings":"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","file":"static/js/5.e8779fb0.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m256 0c-141.159 0-256 114.841-256 256s114.841 256 256 256 256-114.841 256-256-114.841-256-256-256z\",\n  fill: \"#4ab8f7\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m256 0v512c141.159 0 256-114.841 256-256s-114.841-256-256-256z\",\n  fill: \"#368dcf\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m352.543 236.349-83.705-138.529c-2.716-4.496-7.586-7.243-12.838-7.243s-10.122 2.747-12.838 7.243l-83.705 138.529c-3.005 4.972-2.868 11.232.351 16.068s8.943 7.374 14.688 6.527l38.335-5.684v153.162c0 8.284 6.716 15 15 15h56.339c8.284 0 15-6.716 15-15v-153.162l38.336 5.684c5.742.848 11.468-1.691 14.688-6.527 3.217-4.836 3.354-11.096.349-16.068z\",\n  fill: \"#eeeef2\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m352.543 236.349-83.705-138.529c-2.716-4.496-7.586-7.243-12.838-7.243v330.845h28.169c8.284 0 15-6.716 15-15v-153.162l38.336 5.684c5.742.848 11.468-1.691 14.688-6.527 3.218-4.836 3.355-11.096.35-16.068z\",\n  fill: \"#e1e1e6\"\n});\n\nvar SvgArrow = function SvgArrow(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    enableBackground: \"new 0 0 512 512\",\n    height: 512,\n    viewBox: \"0 0 512 512\",\n    width: 512,\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrow, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/arrow.90e2f4ca.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useState} from 'react';\nimport Button from './Button';\nimport Sheet from './Sheet';\nimport { ReactComponent as Arrow } from '../static/arrow.svg';\n\ninterface KeyboardProps {\n    emitButton: React.ReactNode,\n    header: React.ReactNode,\n    onChange?: Function\n}\n\nexport default function Keyboard ({emitButton, header, onChange}: KeyboardProps) {\n\n    const [keyList, setKeyList] = useState([] as Array<number>);\n\n    const changeKeyList = (keyList: Array<number>) => {\n        setKeyList(keyList);\n        (typeof onChange === 'function') && onChange(keyList.join(''));\n    }\n\n    // const reset = () => {\n    //     setKeyList([] as Array<number>);\n    // }\n\n    const keyClickHandler = (val: number) => () => {\n        const keyListCopy = keyList.slice();\n        keyListCopy.push(val);\n        changeKeyList(keyListCopy);\n    }\n\n    const removeKeyHandler = () => {\n        const keyListCopy = keyList.slice();\n        keyListCopy.pop();\n        changeKeyList(keyListCopy);\n    }\n\n    return <Sheet button={emitButton} header={header} canModalClose>\n        <div className={\"zui-keyboard\"}>\n            {[1,2,3,4,5,6,7,8,9].map(val => <Button type=\"raw\" className=\"zui-key\" onClick={keyClickHandler(val)} key={val}>{val}</Button>)}\n            <div className=\"zui-key\"></div>\n            <Button type=\"raw\" className=\"zui-key\" onClick={keyClickHandler(0)}>0</Button>\n            <Button type=\"raw\" className=\"zui-key zui-key-del\" onClick={removeKeyHandler}><Arrow className=\"zui-key-arrow\"></Arrow></Button>\n        </div>\n    </Sheet>\n\n}\n\n","import React, {useState} from 'react'\nimport Keyboard from '../../../views/Keyboard';\nimport Button from '../../../views/Button';\n\nexport default () => {\n\n    const [value, setValue] = useState('');\n\n    const onChange = (val) => {\n        setValue(val);\n    }\n\n    return <div style={{margin: '50px 16px'}}>\n        <Keyboard\n            onChange={onChange}\n            header={<div className=\"test-value-box\">{value}</div>}\n            emitButton={<Button>打开键盘</Button>}\n        ></Keyboard>\n    </div>\n};","import React, {useState, useEffect} from 'react';\n\ninterface TransitionProps {\n    name: string,\n    isShow: boolean,\n    children: React.ReactNode,\n    time?: number\n}\n\nexport default function Transition({name, isShow, children, time = 300}: TransitionProps) {\n\n    const initName = name || '';\n\n    const [transitionName, setName] = useState('');\n    const [isConShow, setConShow] = useState(false);\n\n    useEffect(() => {\n        if (isShow) {\n            setConShow(true);\n            setTimeout(() => {\n                setName(`${initName}--in`);\n            }, 34); // 下两帧\n        }\n        return () => {\n            // 当销毁时 设置 class 为 out\n            if (!isConShow && isShow) {\n                setName(`${initName}--out`);\n                // 正常关闭\n                setTimeout(() => {\n                    setConShow(false);\n                    setName('');\n                }, time);\n                // TODO\n                // 也可以通过 transitionEnd 来计算结束时间\n                // 但是如果没有设置动画效果那么怎么办？\n                // 如何判断是否有动画效果？\n            }\n        }\n    }, [isShow])\n\n    return <>\n        {\n            isConShow ?\n                React.Children.map(children, (child) => {\n                    const childTs = child as React.DetailedReactHTMLElement<any, HTMLElement>;\n                    return React.cloneElement(childTs,\n                        {\n                            className:  `${childTs.props.className} ${transitionName}`,\n                        },\n                        // children // 外包裹\n                    )\n                })\n                : null\n        }\n    </>\n}\n","import React, { useState, ReactNode, MouseEvent } from 'react';\nimport Transition from './Transition';\n\ninterface SheetProps {\n    children: ReactNode,\n    button: ReactNode, // 触发Sheet的按钮\n    header?: ReactNode,\n    titleTxt?: string,\n    canModalClose?: boolean,\n    ensureHandler?: Function\n}\n\nexport default  function Sheet(props: SheetProps) {\n    const [isShow, setIsShow] = useState(false);\n\n    const modalHandler = () => {\n        setIsShow(false);\n    }\n\n    const closeSheet = () => {\n        setIsShow(false);\n    }\n\n    const clickHandler = (e: MouseEvent<HTMLElement>): void => {\n        // e.cancelBubble = true; // 阻止冒泡\n        e.stopPropagation(); // 阻止冒泡\n        if (typeof props.ensureHandler === 'function') {\n            props.ensureHandler();\n        }\n        closeSheet();\n    }\n\n    \n    return <>\n        <div onClick={() => setIsShow(true)}>{props.button}</div>\n        <Transition name=\"zui-sheet\" isShow={isShow}>\n            <div className='zui-sheet-box'>\n                <div className=\"zui-sheet-mask\" onClick={modalHandler}></div>\n                {/* sheet主体 */}\n                <div className=\"zui-sheet-area\">\n                    {/* 头部信息 */}\n                    {\n                        props.header ?\n                            props.header :\n                            <div className=\"zui-sheet-header\">\n                                <div onClick={closeSheet}>取消</div>\n                                <div>{props.titleTxt || ''}</div>\n                                <div onClick={clickHandler}>确定</div>\n                            </div>\n                    }\n                    {/* 内容部分 */}\n                    <div\n                        className=\"zui-sheet-body\"\n                    >{props.children}</div>\n                </div>\n            </div>\n        </Transition>\n    </>\n}\n"],"sourceRoot":""}