{"version":3,"sources":["controller/swiper.ts","views/Swiper.tsx","site/pages/swiper/index.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/createClass.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/typeof.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/inherits.js","controller/event.ts","controller/move.ts"],"names":["SwiperControl","curIdx","direction","len","justifyDistance","swiperRange","range","this","lockDirection","distance","endPoint","MoveControl","Swiper","refSwiper","children","width","height","className","useState","curSwiperIdx","setCurTabIdx","x","y","swiperPoint","setSwiperPoint","tansitionStyle","setTansitionStyle","swiperControl","length","swiperClassNames","swiperStyle","getValOrDefault","onStartHander","event","start","onMoveHander","point","move","onEndHander","end","getIndex","useEffect","setSwiperRange","offsetWidth","offsetHeight","eventControl","EventControl","createEventList","listenerAllOfEle","removeAllOfEle","concat","getClassName","ref","ele","style","transform","transition","SwiperNav","curActiveIdx","Array","fill","map","val","idx","key","TestContent","background","display","justifyContent","alignItems","Item","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","self","call","ReferenceError","_setPrototypeOf","p","_inherits","subClass","superClass","create","value","eventList","willPreventDefault","willNotPreventDefault","$ele","isPassiveSupported","passiveSupported","passive","window","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","keys","forEach","pd","indexOf","addEventListener","removeEventListener","zeroPoint","JSON","stringify","startPoint","Prevent_Distance","isAnm","parse","Error","absX","Math","abs","absY","getEventPoint","pageX","pageY","_resetSomething","preventDefault","assign","getMoveDist","_getLockDirection","_getFinalEndPonit"],"mappings":"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","file":"static/js/2.b9840f24.chunk.js","sourcesContent":["import MoveControl from './move';\r\n\r\ntype Point = {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\ntype Direction = 'x' | 'y';\r\n\r\ninterface SwiperControlProps {\r\n    curIdx: number,\r\n    direction: Direction,\r\n    len: number,\r\n    justifyDistance?: number,\r\n}\r\n\r\nclass SwiperControl extends MoveControl {\r\n\r\n    swiperRange: number;\r\n    justifyDistance: number;\r\n    len: number;\r\n    curIdx: number;\r\n\r\n    constructor({curIdx = 0, direction = 'x', len, justifyDistance = 33}: SwiperControlProps) {\r\n        super({\r\n            direction,\r\n        });\r\n        this.len = len;\r\n        this.curIdx = curIdx;\r\n        this.justifyDistance = justifyDistance;\r\n        this.swiperRange = 0;\r\n    }\r\n\r\n    // 可能横竖屏 或者 使用者改变 Swiper大小\r\n    // 所以宽高是动态获取的\r\n    setSwiperRange(range: number) {\r\n        this.swiperRange = range;\r\n    }\r\n\r\n    getIndex(): number {\r\n        return this.curIdx;\r\n    }\r\n\r\n    // 终止时位置调整\r\n    _getFinalEndPonit(): Point {\r\n        if (this.direction === this.lockDirection) {\r\n            const distance = this.distance[this.direction];\r\n            if (distance > this.justifyDistance) {\r\n                if (this.curIdx < this.len - 1) {\r\n                    this.curIdx++;\r\n                    this.endPoint[this.direction] -= this.swiperRange;\r\n                }\r\n            } else if (distance < this.justifyDistance) {\r\n                if (this.curIdx > 0) {\r\n                    this.curIdx--;\r\n                    this.endPoint[this.direction] += this.swiperRange;\r\n                }\r\n            }\r\n        }\r\n        return this.endPoint;\r\n    }\r\n\r\n}\r\n\r\nexport default SwiperControl;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport SwiperControl from '../controller/swiper';\r\nimport { getClassName, getValOrDefault } from '../utils/base';\r\nimport EventControl from '../controller/event';\r\n\r\ntype UseEvent = React.TouchEvent<HTMLDivElement> | React.MouseEvent<HTMLDivElement>;\r\n\r\ninterface SwiperProps {\r\n    children: React.ReactNodeArray,\r\n    width: string,\r\n    height: string,\r\n    direction: 'x' | 'y',\r\n    className: string\r\n}\r\n\r\nexport default function Swiper ({\r\n            children, width, height,\r\n            direction = 'x', className\r\n        }: SwiperProps) {\r\n    \r\n    const [curSwiperIdx, setCurTabIdx] = useState(0);\r\n    const [swiperPoint, setSwiperPoint] = useState({ x: 0, y: 0});\r\n    const [tansitionStyle, setTansitionStyle] = useState('');\r\n\r\n    const swiperControl = new SwiperControl({\r\n        curIdx: 0,\r\n        direction,\r\n        len: children.length\r\n    });\r\n\r\n    let refSwiper: HTMLDivElement | null;\r\n\r\n    const swiperClassNames = {\r\n        [className]: !!className,\r\n        [`zui-swiper-${direction}`]: true\r\n    }\r\n\r\n    const swiperStyle: React.CSSProperties = {\r\n        width: getValOrDefault(width, ''),\r\n        height: getValOrDefault(height, '')\r\n    }\r\n\r\n    const onStartHander = (event: UseEvent) => {\r\n        swiperControl.start(event);\r\n        setTansitionStyle('');\r\n    }\r\n\r\n    const onMoveHander = (event: UseEvent) => {\r\n        const point = swiperControl.move(event);\r\n        setSwiperPoint(point);\r\n    }\r\n\r\n    const onEndHander = () => {\r\n        const point = swiperControl.end();\r\n        setCurTabIdx(swiperControl.getIndex());\r\n        setSwiperPoint(point);\r\n        setTansitionStyle('all 0.3s');\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (direction === 'x') {\r\n            swiperControl.setSwiperRange(refSwiper!.offsetWidth);\r\n        } else {\r\n            swiperControl.setSwiperRange(refSwiper!.offsetHeight);\r\n        }\r\n\r\n        const eventControl = new EventControl(refSwiper as HTMLDivElement);\r\n        eventControl.createEventList(onStartHander, onMoveHander, onEndHander);\r\n        eventControl.listenerAllOfEle();\r\n\r\n        return () => {\r\n            eventControl.removeAllOfEle();\r\n        };\r\n    }, [])\r\n\r\n    return <div className={'zui-swiper'.concat(getClassName(swiperClassNames))}\r\n        ref={ele => refSwiper = ele}\r\n        style={swiperStyle}>\r\n        <div className=\"zui-swiper-body\" style={{\r\n            transform: `translate(${swiperPoint.x}px, ${swiperPoint.y}px)`,\r\n            transition: tansitionStyle\r\n        }}>\r\n            { children }\r\n        </div>\r\n        <SwiperNav\r\n            len={children.length}\r\n            curActiveIdx={curSwiperIdx}\r\n        ></SwiperNav>\r\n    </div>\r\n}\r\n\r\nSwiper.Item = ({children}: {children: React.ReactNode}): JSX.Element => {\r\n    return <div className=\"zui-swiper-item\">{children}</div>\r\n};\r\n\r\nfunction SwiperNav({len, curActiveIdx}: {\r\n            len: number,\r\n            curActiveIdx: number\r\n        }): JSX.Element {\r\n    return <div className=\"zui-swiper-nav-box\">\r\n        {\r\n            Array(len).fill('').map((val, idx) => \r\n            <span\r\n                key={idx}\r\n                className={'zui-swiper-nav'.concat(curActiveIdx === idx ? ' active' : '')}\r\n            ></span>)\r\n        }\r\n    </div>\r\n}\r\n","import React from 'react';\r\n\r\nimport Swiper from '../../../views/Swiper';\r\n\r\nfunction TestContent({val, children}) {\r\n    return <div style={{\r\n        height: '100%',\r\n        // background: `rgb(33, 133, ${val*51})`,\r\n        background: 'white',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    }}>{children}{val}</div>\r\n}\r\n\r\nexport default () => {\r\n    return <div>\r\n        <Swiper height={'333px'} direction=\"y\">\r\n            {\r\n                [1,2,3,4,5].map(val => <Swiper.Item key={val}>\r\n                    <TestContent val={val}>上下滑</TestContent>\r\n                </Swiper.Item>)\r\n            }\r\n        </Swiper>\r\n        <br></br>\r\n        <Swiper height={'333px'}>\r\n            {\r\n                [1,2,3,4,5].map(val => <Swiper.Item key={val}>\r\n                    <TestContent val={val}>左右滑</TestContent>\r\n                </Swiper.Item>)\r\n            }\r\n        </Swiper>\r\n    </div>\r\n}\r\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import { passiveSupported } from \"../utils/base\";\r\n\r\nclass EventControl {\r\n    \r\n    eventList: {[key: string]: Function};\r\n    willPreventDefault: object | boolean;\r\n    willNotPreventDefault: object | boolean;\r\n    $ele: HTMLDivElement;\r\n\r\n    constructor(ele: HTMLDivElement) {\r\n        this.eventList = {};\r\n        const isPassiveSupported = passiveSupported();\r\n        this.willPreventDefault = isPassiveSupported ? { passive: false } : false;\r\n        this.willNotPreventDefault = isPassiveSupported ? { passive: true } : false;\r\n        this.$ele = ele;\r\n    }\r\n\r\n    createEventList(start: Function, move: Function, end: Function) {\r\n        if ('ontouchstart' in window) {\r\n            this.eventList =  {\r\n                touchstart: start,\r\n                touchmove: move,\r\n                touchend: end,\r\n            }\r\n        } else {\r\n            this.eventList =  {\r\n                mousedown: start,\r\n                mousemove: move,\r\n                mouseup: end,\r\n            }\r\n        }\r\n    }\r\n\r\n    listenerAllOfEle() {\r\n        Object.keys(this.eventList).forEach(key => {\r\n            const pd = key.indexOf('move') >= 0 ? this.willPreventDefault : this.willNotPreventDefault;\r\n            this.$ele.addEventListener(key, this.eventList[key] as any, pd as any);\r\n        })\r\n    }\r\n\r\n    removeAllOfEle() {\r\n        Object.keys(this.eventList).forEach(key => {\r\n            this.$ele.removeEventListener(key, this.eventList[key] as any);\r\n        })\r\n    }\r\n}\r\n\r\nexport default EventControl;\r\n","import { getEventPoint } from \"../utils/base\";\r\nimport { passiveSupported } from \"../utils/base\";\r\n\r\ntype Point = {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\ntype Direction = 'x' | 'y';\r\n\r\ntype UseEvent = React.TouchEvent<HTMLDivElement> | React.MouseEvent<HTMLDivElement>;\r\n\r\ninterface MoveControlProps {\r\n    direction?: Direction\r\n}\r\n\r\nconst zeroPoint = JSON.stringify({ x: 0, y: 0 });\r\n\r\nclass MoveControl {\r\n\r\n    startPoint: Point;\r\n    distance: Point;\r\n    endPoint: Point;\r\n    direction: Direction;\r\n    Prevent_Distance: number;\r\n    lockDirection: Direction | null;\r\n    isAnm: boolean;\r\n\r\n    constructor({direction = 'x'}: MoveControlProps) {\r\n        this.direction = direction;\r\n        this.startPoint = JSON.parse(zeroPoint);\r\n        this.distance = JSON.parse(zeroPoint);\r\n        this.endPoint = JSON.parse(zeroPoint);\r\n        this.Prevent_Distance = 5;\r\n        this.lockDirection = null;\r\n        this.isAnm = false;\r\n    }\r\n\r\n    // 终止时位置调整\r\n    _getFinalEndPonit(): Point {\r\n        throw Error('_getFinalEndPonit 需要被重写');\r\n    }\r\n\r\n    // 起点重置项\r\n    _resetSomething() {\r\n        // 需要时重写\r\n        this.distance[this.direction] = 0;\r\n    }\r\n\r\n    // 方向锁定\r\n    _getLockDirection(): Direction | null {\r\n        const absX = Math.abs(this.distance.x);\r\n        const absY = Math.abs(this.distance.y);\r\n\r\n        let lockDirection: Direction | null = null;\r\n\r\n        if (this.direction === 'x') {\r\n            if (absX >= absY && absX > this.Prevent_Distance) {\r\n                lockDirection = 'x';\r\n            } else if (absY > this.Prevent_Distance) {\r\n                lockDirection = 'y';\r\n            }\r\n        } else {\r\n            if (absY >= absX && absY > this.Prevent_Distance) {\r\n                lockDirection = 'y';\r\n            } else if (absX > this.Prevent_Distance) {\r\n                lockDirection = 'x';\r\n            }\r\n        }\r\n        \r\n        return lockDirection;\r\n    }\r\n\r\n    // 移动过程中的移动距离 = 最后停留点 - 触摸点移动距离\r\n    getMoveDist() {\r\n        const dist = this.endPoint[this.direction] - this.distance[this.direction];\r\n        return dist;\r\n    }\r\n\r\n    start(event: UseEvent): void {\r\n        this.isAnm = true;\r\n        const point = getEventPoint(event);\r\n        this.lockDirection = null;\r\n        this.startPoint = {\r\n            x: point.pageX,\r\n            y: point.pageY\r\n        }\r\n        this._resetSomething();\r\n    }\r\n\r\n    // 移动时：获取移动距离\r\n    move(event: UseEvent): Point {\r\n        if (this.isAnm) {\r\n            const point = getEventPoint(event);\r\n            this.distance = {\r\n                x: this.startPoint.x - point.pageX,\r\n                y: this.startPoint.y - point.pageY,\r\n            }\r\n            if (!this.lockDirection) {\r\n                this.lockDirection = this._getLockDirection();\r\n                if (this.direction === 'y' && event.preventDefault) {\r\n                    event.preventDefault();\r\n                } \r\n            } else if (this.direction === this.lockDirection) {\r\n                event.preventDefault && event.preventDefault();\r\n                return Object.assign({x: 0, y: 0}, {[this.direction]: this.getMoveDist()})\r\n            }\r\n        }\r\n        // 如果return movePoint 那么位置不变\r\n        return this.endPoint;\r\n    }\r\n\r\n    end(): Point {\r\n        this.isAnm = false;\r\n        return this._getFinalEndPonit();\r\n    }\r\n\r\n}\r\n\r\nexport default MoveControl;\r\n"],"sourceRoot":""}